\Preamble{xhtml,mathml}

\Css{ table.longtable{margin-left:0; margin-right:0;!important;}}
\Css{ table.tabular{margin-left:0; margin-right:0;!important;}}

% My color
\Configure{@HEAD}{\HCode{<link rel="stylesheet" type="text/css" href="../../../../../../home2/tourneboeuf/Software/Css/color_dark_solarized.css" />\Hnewline}} 


% Tile, author and date
\Css{ .titleHead{display: none;} }
\Css{ .author{display: none;} }
\Css{ div.date{
    text-align: right;
    margin-right: 20px;
    margin-bottom: 0px;
} }

\Css{ div.maketitle{
    text-align: right;
    position: absolute;
    bottom: -100px;
    left: 0;
    right: 0;
} }

\Css{ body {
    position: relative;
} }


\Css{ html, body, p {
    margin: 0;
    background-color: \#002b36
} }

% No background for table to seee dual color
\Css{ td p.noindent { background: transparent;} }

% Image I don't know why but this removes a bug
% from <- https://tex.stackexchange.com/questions/148173/setting-image-size-in-html-output-of-tex4ht
\Configure{graphics*}
        {jpg}
        {%  
           \Picture[pict]{\csname Gin@base\endcsname .jpg
              \space width="\the\dimexpr \expandafter\csname Gin@req@width\endcsname"
}%  
         }
\Configure{graphics*}
        {png}
        {%  
           \Picture[pict]{\csname Gin@base\endcsname .png
              \space width="\expandafter\the\csname Gin@req@width\endcsname"
}%  
         }


% Minipage
% From michal.h21 <- https://tex.stackexchange.com/questions/229905/configuring-minipage-in-htlatex
% More info <- https://tex.stackexchange.com/questions/195226/configuring-minipage-environment-to-incorporate-width
\makeatletter
% to strip fraction from \textwidth
\def\striptextwidth#1\textwidth{#1}
% we must refer to minipage from the css file, because tags are beeing
% written before we know dimensions
\newcount\mini@count
% save original minipage
\let\oldiimini\@iiiminipage
% redefine minipage
\def\@iiiminipage#1#2[#3]#4{%
% calculate dimensions and save it to macro
\xdef\miniwidth{\strip@pt\dimexpr(\striptextwidth#4pt)*100\relax\%}
\oldiimini{#1}{#2}[#3]{#4}
}

\ConfigureEnv{minipage}{\advance\mini@count by 1\relax\ifvmode\IgnorePar\fi\EndP\HCode{<div class="minipage" align="center" id="minipage\the\mini@count" style="border:1px solid black;">}}
{\ifvmode\IgnorePar\fi\EndP\HCode{</div>\Hnewline}%
% we must write dimension here to the css file
\Css{\#minipage\the\mini@count{width:\miniwidth;}}%
}{}{}
\makeatother
\Css{div.minipage {
 float: left; 
 } 
}
\Css{div.minipage:last-child {
 clear: none; 
 float: right; 
 }
}
\Css{div.figure{clear:both;overflow:auto;width:100\%;}}





\begin{document}
\EndPreamble
% vim: ft=tex
